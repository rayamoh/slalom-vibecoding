# 1-Day Workshop MVP: Real-Time Fraud Alert System

**Generated by Copilot**

**Workshop Date:** TBD  
**Team Size:** 3 people  
**Duration:** 8 hours  
**Goal:** Build a working real-time fraud detection system with good UI

---

## Workshop Deliverable

A functional fraud detection system that:
- Ingests transactions in real-time
- Scores them using ML model with engineered features
- Generates alerts for high-risk transactions
- Displays alerts with explanations in a clean UI
- Supports analyst disposition workflow

---

## Person 1: Frontend Developer - Investigation UI

**Time:** 8 hours | **Priority:** High-impact visual demo

### Deliverables

#### 1. Alert Queue Screen (3 hours)
- Clean, responsive alert list with sorting/filtering
- Display fields:
  - Transaction ID
  - Amount
  - Type (TRANSFER/CASH-OUT/PAYMENT/DEBIT/CASH-IN)
  - Risk Score
  - Status (New/In Review/Closed)
- Color-coded risk bands:
  - Critical = Red (90-100)
  - High = Orange (75-89)
  - Medium = Yellow (60-74)
- Basic filters:
  - Risk level dropdown
  - Transaction type dropdown
  - Time range picker
- Click to view details

#### 2. Alert Detail View (4 hours)
- **Transaction Summary Panel:**
  - Type, amount, timestamp
  - Sender ID (nameOrig)
  - Recipient ID (nameDest)
  
- **Risk Assessment Panel:**
  - Risk score with visual gauge (0-100)
  - Risk band label
  
- **"Why Flagged" Explanation Section:**
  - Top 3-5 reason codes with weights
  - Examples:
    - "High-value transfer rule triggered (>$200K)"
    - "New counterparty - not seen in last 7 days"
    - "Velocity spike: 3x normal hourly transactions"
    - "Amount 5x higher than sender's average"
    - "Rapid TRANSFER → CASH-OUT sequence detected"
  
- **Analyst Actions:**
  - Quick disposition buttons:
    - ✅ Fraud
    - ❌ Not Fraud
    - ⏸️ Needs Review
  - Simple notes textarea
  - Timestamp of actions

#### 3. Real-time Updates (1 hour)
- WebSocket or Server-Sent Events (SSE) connection
- New alerts appear in queue automatically
- Toast notifications for Critical alerts
- Alert count badges

### Tech Stack
**Recommended:** React + shadcn/ui or Vue + PrimeVue (pre-built components for speed)

**Key Libraries:**
- Tailwind CSS for styling
- Recharts or Chart.js for gauges
- WebSocket client for real-time updates

---

## Person 2: Backend Developer - Scoring API & Data Pipeline

**Time:** 8 hours | **Priority:** Core detection engine

### Deliverables

#### 1. Transaction Ingestion API (2 hours)

**Endpoint:** `POST /api/transactions`

**Request Body:**
```json
{
  "eventId": "uuid",
  "step": 370,
  "type": "TRANSFER",
  "amount": 250000.0,
  "nameOrig": "C1234567890",
  "nameDest": "C9876543210",
  "timestamp": "2026-02-10T15:45:00Z"
}
```

**Validation Rules:**
- Required fields: step, type, amount, nameOrig, nameDest
- type must be: CASH-IN, CASH-OUT, DEBIT, PAYMENT, TRANSFER
- amount >= 0
- Return 400 for invalid data with error details

**Storage:** SQLite or Redis for speed (in-memory option)

#### 2. Simplified Feature Engine (3 hours)

Calculate 5 key engineered features per transaction:

1. **velocity_1h:** Count of transactions from nameOrig in last 1 hour
2. **amount_zscore:** Z-score of amount vs. sender's 24h average
3. **new_counterparty_7d:** Boolean - recipient not seen from sender in last 7 days
4. **high_value_transfer_rule:** Boolean - type=TRANSFER AND amount>200,000
5. **cashout_sequence_2h:** Boolean - TRANSFER followed by CASH-OUT from same sender within 2 hours

**Implementation:**
- Maintain sliding window cache in Redis
- Store per-entity aggregates: transaction counts, amounts, counterparty lists
- Update on each transaction
- Fast lookup for scoring service

#### 3. Real-Time Scoring Service (2 hours)

**Endpoint:** `POST /api/score`

**Request:** Transaction + computed features

**Response:**
```json
{
  "eventId": "uuid",
  "riskScore": 0.93,
  "riskBand": "CRITICAL",
  "decision": "ALERT",
  "reasonCodes": [
    {
      "code": "HIGH_VALUE_TRANSFER_RULE",
      "description": "High-value transfer rule triggered (>$200K)",
      "weight": 0.35
    },
    {
      "code": "NEW_COUNTERPARTY_7D",
      "description": "New counterparty - not seen in last 7 days",
      "weight": 0.18
    },
    {
      "code": "VELOCITY_SPIKE_1H",
      "description": "Transaction frequency 3x normal",
      "weight": 0.14
    }
  ],
  "modelVersion": "fraud-xgb-demo-v1",
  "scoredAt": "2026-02-10T15:45:00Z"
}
```

**Implementation:**
- Load pre-trained model (provided by Person 3)
- Call model with feature vector
- Get feature importance/SHAP values
- Map to reason codes

#### 4. Alert Generation & Notification (1 hour)

**Logic:**
```python
if risk_score >= 0.75 or high_value_rule:
    create_alert()
    broadcast_websocket()
```

**Alert Table Schema:**
```sql
CREATE TABLE alerts (
    id INTEGER PRIMARY KEY,
    event_id TEXT UNIQUE,
    risk_score REAL,
    risk_band TEXT,
    transaction_type TEXT,
    amount REAL,
    name_orig TEXT,
    name_dest TEXT,
    reason_codes TEXT, -- JSON
    status TEXT DEFAULT 'New',
    created_at TIMESTAMP,
    disposition TEXT,
    disposition_notes TEXT,
    disposition_at TIMESTAMP
);
```

**WebSocket broadcast:** Send alert JSON to all connected clients

### Tech Stack
**Recommended:** Python (FastAPI) or Node.js (Express)

**Key Libraries:**
- FastAPI + Uvicorn (Python) or Express + Socket.io (Node)
- Redis for feature cache
- SQLite for persistence
- WebSocket library

---

## Person 3: ML Engineer/Full Stack - Model & Integration

**Time:** 8 hours | **Priority:** Intelligence + glue

### Deliverables

#### 1. Pre-Workshop: Train Simple Model (OFF-hours)

**Dataset:** PaySim mobile money fraud dataset

**Features (5 total):**
1. `amount` (numeric)
2. `type_encoded` (categorical: TRANSFER=4, CASH-OUT=3, etc.)
3. `velocity_1h` (engineered)
4. `new_counterparty_7d` (engineered, boolean)
5. `high_value_rule` (engineered, boolean)

**Model:** XGBoost binary classifier

**Training Code:**
```python
import xgboost as xgb
from sklearn.model_selection import train_test_split

# Prepare data (exclude balance columns)
X = df[['amount', 'type_encoded', 'velocity_1h', 
        'new_counterparty_7d', 'high_value_rule']]
y = df['isFraud']

# Time-based split
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, shuffle=False
)

# Train
model = xgb.XGBClassifier(
    max_depth=6,
    learning_rate=0.1,
    n_estimators=100,
    scale_pos_weight=len(y_train[y_train==0])/len(y_train[y_train==1])
)
model.fit(X_train, y_train)

# Save
model.save_model('fraud_model.json')
```

**Target:** >80% precision @ top 1% on test set

#### 2. Model Explanation Service (3 hours)

**Feature → Reason Code Mapping:**
```python
FEATURE_MAP = {
    'velocity_1h': 'Transaction frequency {value}x normal',
    'amount_zscore': 'Amount {value:.1f}x higher than typical',
    'new_counterparty_7d': 'New recipient - first time seen in 7 days',
    'high_value_rule': 'High-value transfer rule triggered (>$200K)',
    'cashout_sequence_2h': 'Rapid TRANSFER → CASH-OUT pattern',
    'amount': 'Unusually large transaction amount'
}
```

**Implementation:**
```python
import shap

def explain_prediction(model, features, feature_names):
    """
    Get top feature contributions for a single prediction
    """
    # Option 1: SHAP (more accurate but slower)
    explainer = shap.TreeExplainer(model)
    shap_values = explainer.shap_values(features)
    
    # Option 2: XGBoost native (faster)
    # Use get_score() for global, or get_booster() for local
    
    # Get top 5 contributors
    contributions = sorted(
        zip(feature_names, shap_values[0]),
        key=lambda x: abs(x[1]),
        reverse=True
    )[:5]
    
    # Map to reason codes
    reason_codes = []
    for feature, weight in contributions:
        if feature in FEATURE_MAP:
            reason_codes.append({
                'code': feature.upper(),
                'description': FEATURE_MAP[feature],
                'weight': float(abs(weight))
            })
    
    return reason_codes
```

**Endpoint:** Used by Person 2's scoring service

#### 3. Mock Transaction Generator (2 hours)

**Purpose:** Stream synthetic transactions for demo

**Transaction Patterns:**

**Normal (70%):**
- Types: PAYMENT, CASH-IN, DEBIT
- Amounts: $10 - $1,000
- Random sender/recipient pairs
- Frequency: 1-2 per minute

**Suspicious (20%):**
- High amounts ($5K - $50K)
- New counterparties
- Slightly elevated velocity

**Fraudulent (10%):**
- High-value TRANSFER ($200K+)
- Rapid sequence: TRANSFER → CASH-OUT within 30 min
- New counterparty + high amount + velocity spike

**Implementation:**
```python
import requests
import random
import time
from datetime import datetime

def generate_transaction(pattern='normal'):
    if pattern == 'fraud':
        return {
            'eventId': str(uuid.uuid4()),
            'step': current_step,
            'type': 'TRANSFER',
            'amount': random.uniform(200000, 500000),
            'nameOrig': f'C{random.randint(1000000, 9999999)}',
            'nameDest': f'C{random.randint(1000000, 9999999)}',
            'timestamp': datetime.now().isoformat()
        }
    # ... similar for normal and suspicious
    
while True:
    pattern = random.choices(
        ['normal', 'suspicious', 'fraud'],
        weights=[0.7, 0.2, 0.1]
    )[0]
    
    txn = generate_transaction(pattern)
    requests.post('http://localhost:8000/api/transactions', json=txn)
    
    time.sleep(random.uniform(5, 15))  # 5-15 sec between txns
```

#### 4. Integration & Demo Script (3 hours)

**Tasks:**
1. Connect Person 2's API to model
2. Ensure feature calculation matches training
3. Test end-to-end flow
4. Create demo scenario script
5. Error handling and logging
6. Docker Compose or startup script

**Demo Scenario Script:**
```bash
# 1. Start backend
cd backend
python main.py &

# 2. Start frontend
cd frontend
npm run dev &

# 3. Start transaction generator
cd ml
python transaction_generator.py &

# 4. Open browser to localhost:3000

# 5. Watch alerts appear!
```

### Tech Stack
- Python (scikit-learn, XGBoost, SHAP)
- FastAPI or Flask for explanation service
- Requests library for generator

---

## End-of-Day Demo Flow (5 minutes)

### Demo Script

1. **Introduction (30 sec)**
   - "Real-time fraud detection system with ML + explainable AI"

2. **Start Services (30 sec)**
   - Show terminal: backend running, frontend running, generator running

3. **Show Alert Queue (1 min)**
   - Open browser to dashboard
   - Point out: "Transactions streaming in background"
   - Alert appears in queue (red for Critical)
   - Show count updating

4. **Investigate Alert (2 min)**
   - Click on Critical alert
   - Show transaction details: "$250K TRANSFER"
   - Highlight risk score: **95/100**
   - Read explanation:
     - ✓ "High-value transfer rule triggered (>$200K)"
     - ✓ "New counterparty - not seen in last 7 days"
     - ✓ "Velocity spike: 3x normal hourly transactions"

5. **Disposition (30 sec)**
   - Click "Fraud" button
   - Alert moves to "Closed" status
   - Show successful save

6. **Real-time Update (30 sec)**
   - Another alert appears automatically
   - "This is all happening in real-time"

7. **Q&A (30 sec)**
   - Explain: No balance features used (dataset constraint)
   - Engineering features from behavior
   - Model trained on PaySim dataset

---

## Why This Works in 1 Day

✅ **Scoped ruthlessly:** Core value only - detection + explanation  
✅ **Pre-built components:** UI libraries, pre-trained model  
✅ **Mock data:** No complex database setup  
✅ **Visual impact:** Real-time alerts = compelling demo  
✅ **Clear roles:** Minimal integration dependencies  
✅ **MVP focused:** Proves concept, not production-ready  

---

## What's NOT Included (Future Phases)

❌ Case management workflow (linking multiple alerts)  
❌ User authentication / RBAC  
❌ Entity profile pages  
❌ Entity relationship graphs  
❌ Advanced drift monitoring  
❌ Production-ready feature store  
❌ Batch scoring pipeline  
❌ Advanced filtering / search  
❌ Historical analysis / trends  
❌ Audit trail  
❌ Integration with real transaction systems  

---

## Technical Requirements

### Person 1 (Frontend)
- Node.js 18+
- React 18+ or Vue 3+
- Modern browser with WebSocket support

### Person 2 (Backend)
- Python 3.9+ (if FastAPI) or Node.js 18+ (if Express)
- Redis 6+ (or in-memory alternative)
- SQLite 3+

### Person 3 (ML)
- Python 3.9+
- XGBoost 1.7+
- scikit-learn 1.3+
- SHAP 0.42+
- PaySim dataset (pre-downloaded)

### Infrastructure
- 3 laptops/workstations
- Local network or shared localhost
- Git for code sharing (optional but recommended)

---

## Pre-Workshop Setup Checklist

### 1 Week Before
- [ ] Download PaySim dataset
- [ ] Set up development environments (all team members)
- [ ] Install required libraries
- [ ] Verify everyone can run "Hello World" in their stack

### 1 Day Before
- [ ] Person 3: Train and export model
- [ ] Person 3: Validate model performance
- [ ] Share model file with Person 2
- [ ] Create shared Git repo (optional)
- [ ] Define API contracts (JSON schemas)

### Morning Of
- [ ] Review roles and deliverables
- [ ] Set up communication channel (Slack, Teams)
- [ ] Establish integration checkpoints (Hour 4, Hour 6)
- [ ] Agree on localhost ports (e.g., Frontend:3000, Backend:8000)

---

## Integration Checkpoints

### Hour 4 (Mid-Day)
- **Person 1:** Alert queue UI rendering static data
- **Person 2:** Ingestion API accepting transactions, basic features calculating
- **Person 3:** Model loaded and can score a sample transaction
- **Integration:** Person 2 can call Person 3's model

### Hour 6 (Late Afternoon)
- **Person 1:** Alert detail view working, WebSocket connected
- **Person 2:** Full scoring pipeline working, alerts being created
- **Person 3:** Transaction generator running, reason codes mapping done
- **Integration:** End-to-end flow working (transaction → alert → UI)

### Hour 8 (End of Day)
- **All:** Polish, test demo scenario, prepare presentation
- **Backup:** Have recorded demo in case of live demo issues

---

## Success Metrics

### Functional
- [ ] At least 1 fraudulent transaction detected in real-time
- [ ] Alert appears in UI within 2 seconds
- [ ] Explanation shows 3+ reason codes
- [ ] Analyst can successfully disposition alert
- [ ] No critical bugs during demo

### Demo Impact
- [ ] Audience understands the value proposition
- [ ] Visual design looks professional
- [ ] Real-time aspect is clear and impressive
- [ ] Explainability is compelling ("not a black box")

---

## Contingency Plans

### If Behind Schedule

**Hour 4:**
- Person 1: Use static mock data instead of WebSocket
- Person 2: Simplify to 3 features instead of 5
- Person 3: Use simpler explanation (feature importance only, no SHAP)

**Hour 6:**
- Skip real-time updates, use manual refresh
- Pre-generate transactions instead of streaming
- Reduce scope of alert detail view

### If Ahead of Schedule

**Bonus Features:**
- Add entity profile page (single customer view)
- Add simple statistics dashboard (total alerts, fraud rate)
- Add alert filtering by amount range
- Add basic styling improvements / animations
- Add disposition history view

---

## Post-Workshop Next Steps

### Immediate (Week 1)
1. Document architecture and code
2. Package as Docker containers
3. Add unit tests for critical paths
4. Create GitHub repo with README

### Short-term (Month 1)
1. Implement case management
2. Add user authentication
3. Improve feature engineering (more features)
4. Add batch scoring capability
5. Deploy to cloud (Azure/AWS)

### Medium-term (Quarter 1)
1. Production-ready feature store
2. Model monitoring and drift detection
3. Entity relationship graphs
4. Advanced investigation tools
5. Integration with real transaction system

---

## Resources

### Documentation to Review
- [productContext_Reference.md](memory-bank/productContext_Reference.md) - Full PRD
- [techContext.md](memory-bank/techContext.md) - Technical standards
- [systemPatterns.md](memory-bank/systemPatterns.md) - Architecture patterns

### Datasets
- **PaySim:** https://www.kaggle.com/datasets/ealaxi/paysim1

### Technology References
- **FastAPI:** https://fastapi.tiangolo.com/
- **React + shadcn/ui:** https://ui.shadcn.com/
- **XGBoost:** https://xgboost.readthedocs.io/
- **SHAP:** https://shap.readthedocs.io/

---

**Generated by Copilot on February 10, 2026**
